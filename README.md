# YpoxreotikiErgasia23_e20019_Gavrielatos_Evangelos

# Εισαγωγή
Η εργασία αυτή υλοποιεί μια εφαρμογή Flask που χρησιμοποιεί τη βιβλιοθήκη PyMongo για να συνδεθεί σε ένα τοπικό MongoDB και να εκτελέσεις λειτουργίες βάσης δεδομένων. Επιτρέπει σε χρήστες να δημιουργούν λογαριασμούς να κάνουν κρατήσεις 
πτήσεων, να αναζητούν πτήσεις σε ένα σύστημα αεροπορικών εισητηρίων να κάνουν κρατήσεις αεροπορικών εισητηρίων και αρκετά άλλα που θα παρουσιαστούν αναλυτικά στη συνέχεια.

# Ανάλυση σύνδεσης
******************************************************************************************************************************************************************************************************************************
Στη συνέχεια ορίζονται οι συλλογές της βάσης δεδομένων που θα χρησιμοποιηθούν για την αποθήκευση πληροφοριών χρηστών, πτήσεων και κρατήσεων.
```
db = client['DigitalAirlines']
users = db['users']
flights = db['flights']
reservations = db['reservations']
```
******************************************************************************************************************************************************************************************************************************
Και τέλος δημιουργούμαι μια νέα Flask εφαρμογή 
```
app = Flask(__name__)
```
******************************************************************************************************************************************************************************************************************************
Οι global μεταβλητές 
```
isloggedin = False
isuser = False
username1 = "None"
```
χρησιμοποιούνται αργότερα στο πρόγραμμα για να ελέγχουμε αν ο χρήστης είναι συνδεδεμένος στην εφαρμογή, τι ρόλο έχει και ποιό είναι το username του αντίστοιχα. 

# Λειτουργίες Συστήματος

@app.route("/register", methods=["POST"])

Σε αυτό το endpoint αναπτύσσεται μια ενέργεια εγγραφής στην εφαρμογή. 

Οι πληροφορίες που ο χρήστης παρέχει συλλέγονται από το αίτημα (request) και αποθηκεύονται στις μεταβλητές username και email.Γίνεται έλεγχος για να διαπιστωθεί εάν υπάρχει ήδη χρήστης με ίδιο username ή το ίδιο email στη βάση δεδομένων. 

Αυτό γίνεται αναζητώντας έναν υπάρχοντα χρήστη με τη χρήση της μέθοδου find_one() στη συλλογή (collection) "users" και χρησιμοποιώντας τον τελεστή $or για να ελέγξει εάν υπάρχει είτε ίδιο email είτε ίδιο όνομα χρήστη.

Εάν υπάρχει ήδη ένας χρήστης με τις ίδιες πληροφορίες, επιστρέφεται ένα μήνυμα λάθους στη μορφή ενός αντικειμένου Response με κωδικό κατάστασης 409 (Conflict). 

Εάν δεν υπάρχει ο χρήστης, δημιουργείται ένα αντικείμενο με τις πληροφορίες που έδωσε ο χρήστης. Οι πληροφορίες αποθηκεύονται σε ένα λεξικό με τα πεδία "username", "email", "first_name", "last_name", "password", 
"birthdate", "country", "passport_number" και "role". 

Το αντικείμενο του χρήστη προστίθεται στη συλλογή "users" με τη χρήση της μεθόδου insert_one().

Τέλος επιστρέφεται ένα αντικείμενο Response με κωδικό κατάστασης 201 (Created) για να υποδείξει ότι η εγγραφή ολοκληρώθηκε με επιτυχία.
